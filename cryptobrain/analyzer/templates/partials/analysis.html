<h2 class="text-2xl font-bold text-gray-100 mb-6 flex items-center">
    <svg class="w-8 h-8 mr-3 text-indigo-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path></svg>
    AI Analysis
</h2>

{% if error %}
<div class="bg-red-900 bg-opacity-50 border-l-4 border-red-500 text-red-200 p-4 rounded-lg shadow-md animate-pulse" role="alert">
    <div class="flex">
        <div class="py-1"><svg class="fill-current h-6 w-6 text-red-400 mr-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.93 17.07A10 10 0 1 1 17.07 2.93 10 10 0 0 1 2.93 17.07zM9 5v6h2V5H9zm0 8h2v-2H9v2z"/></svg></div>
        <div>
            <p class="font-bold">Analysis Temporarily Unavailable</p>
            <p class="text-sm">{{ error }}</p>
        </div>
    </div>
</div>
{% else %}
<div class="grid grid-cols-1 md:grid-cols-2 gap-6">
    <!-- Sentiment Analysis Card -->
    <div class="transform hover:scale-105 transition-transform duration-300 bg-gray-800 p-6 rounded-xl shadow-lg border border-gray-700 hover:border-indigo-500">
        <h3 class="text-lg font-semibold text-gray-100 mb-3 flex items-center">
            <svg class="w-6 h-6 mr-2 text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
            Sentiment Analysis
        </h3>
        {% if sentiment %}
            <p class="text-gray-300">
                Overall Sentiment:
                <span class="font-bold {% if sentiment.sentiment == 'positive' %}text-emerald-400{% elif sentiment.sentiment == 'negative' %}text-red-400{% else %}text-gray-400{% endif %}">
                    {{ sentiment.sentiment|default:'Neutral'|capfirst }}
                </span>
            </p>
            <div class="w-full bg-gray-700 rounded-full h-3 mt-2.5">
                <div class="h-3 rounded-full transition-all duration-500 {% if sentiment.sentiment == 'positive' %}bg-gradient-to-r from-green-500 to-emerald-500{% elif sentiment.sentiment == 'negative' %}bg-gradient-to-r from-red-500 to-red-600{% else %}bg-gray-500{% endif %}" style="width: {{ sentiment.confidence_percentage }}%"></div>
            </div>
            <p class="text-xs text-gray-400 mt-1.5 text-right">Confidence: {{ sentiment.confidence_percentage }}%</p>
        {% else %}
            <p class="text-gray-500">Not available.</p>
        {% endif %}
    </div>

    <!-- Trend Prediction Card -->
    <div class="transform hover:scale-105 transition-transform duration-300 bg-gray-800 p-6 rounded-xl shadow-lg border border-gray-700 hover:border-indigo-500">
        <h3 class="text-lg font-semibold text-gray-100 mb-3 flex items-center">
            <svg class="w-6 h-6 mr-2 text-purple-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"></path></svg>
            Trend Prediction
        </h3>
        {% if trend_prediction %}
            <p class="text-gray-300">
                Predicted Trend:
                <span class="font-bold {% if trend_prediction.trend == 'bullish' %}text-emerald-400{% elif trend_prediction.trend == 'bearish' %}text-red-400{% else %}text-gray-400{% endif %}">
                    {{ trend_prediction.trend|default:'Neutral'|capfirst }}
                </span>
            </p>
            <div class="w-full bg-gray-700 rounded-full h-3 mt-2.5">
                <div class="h-3 rounded-full transition-all duration-500 {% if trend_prediction.trend == 'bullish' %}bg-gradient-to-r from-green-500 to-emerald-500{% elif trend_prediction.trend == 'bearish' %}bg-gradient-to-r from-red-500 to-red-600{% else %}bg-gray-500{% endif %}" style="width: {{ trend_prediction.confidence_percentage }}%"></div>
            </div>
            <p class="text-xs text-gray-400 mt-1.5 text-right">Confidence: {{ trend_prediction.confidence_percentage }}%</p>
            <p class="text-sm text-gray-300 mt-4 pt-3 border-t border-gray-700 bg-gray-900 bg-opacity-50 p-3 rounded-md">
                <strong class="font-semibold text-gray-200">Reasoning:</strong> {{ trend_prediction.reasoning|default:'Not enough data for a prediction.' }}
            </p>
        {% else %}
            <p class="text-gray-500">Not available.</p>
        {% endif %}
    </div>
</div>
{% endif %}
